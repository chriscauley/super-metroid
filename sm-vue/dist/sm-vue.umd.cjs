(function(t,m){typeof exports=="object"&&typeof module<"u"?module.exports=m(require("vue")):typeof define=="function"&&define.amd?define(["vue"],m):(t=typeof globalThis<"u"?globalThis:t||self,t["sm-vue"]=m(t.Vue))})(this,function(t){"use strict";const m=(e,r)=>{const s=e.__vccOpts||e;for(const[c,a]of r)s[c]=a;return s},H=["charge-beam","wave-beam","ice-beam","spazer-beam","plasma-beam"],q={props:{inventory:Object},emits:["toggle-item"],computed:{beams(){return H.map(e=>({id:e,class:[`sm-cwisp__cell -${e}`,this.inventory[e]?"-active":"-inactive"]}))}}},Q={class:"sm-cwisp"},X=["onClick"];function ee(e,r,s,c,a,n){return t.openBlock(),t.createElementBlock("div",Q,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(n.beams,o=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(o.class),onClick:l=>e.$emit("toggle-item",o.id),key:o.id},null,10,X))),128))])}const k=m(q,[["render",ee]]);var h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function te(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var re=1/0,se="[object Symbol]",oe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ne=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,x="\\ud800-\\udfff",ie="\\u0300-\\u036f\\ufe20-\\ufe23",ce="\\u20d0-\\u20f0",_="\\u2700-\\u27bf",y="a-z\\xdf-\\xf6\\xf8-\\xff",ae="\\xac\\xb1\\xd7\\xf7",le="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ue="\\u2000-\\u206f",de=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",w="A-Z\\xc0-\\xd6\\xd8-\\xde",me="\\ufe0e\\ufe0f",j=ae+le+ue+de,g="['’]",B="["+j+"]",E="["+ie+ce+"]",$="\\d+",pe="["+_+"]",S="["+y+"]",O="[^"+x+j+$+_+y+w+"]",be="\\ud83c[\\udffb-\\udfff]",fe="(?:"+E+"|"+be+")",he="[^"+x+"]",C="(?:\\ud83c[\\udde6-\\uddff]){2}",A="[\\ud800-\\udbff][\\udc00-\\udfff]",p="["+w+"]",ge="\\u200d",L="(?:"+S+"|"+O+")",ke="(?:"+p+"|"+O+")",v="(?:"+g+"(?:d|ll|m|re|s|t|ve))?",z="(?:"+g+"(?:D|LL|M|RE|S|T|VE))?",T=fe+"?",I="["+me+"]?",xe="(?:"+ge+"(?:"+[he,C,A].join("|")+")"+I+T+")*",_e=I+T+xe,ye="(?:"+[pe,C,A].join("|")+")"+_e,we=RegExp(g,"g"),je=RegExp(E,"g"),Be=RegExp([p+"?"+S+"+"+v+"(?="+[B,p,"$"].join("|")+")",ke+"+"+z+"(?="+[B,p+L,"$"].join("|")+")",p+"?"+L+"+"+v,p+"+"+z,$,ye].join("|"),"g"),Ee=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$e={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},Se=typeof h=="object"&&h&&h.Object===Object&&h,Oe=typeof self=="object"&&self&&self.Object===Object&&self,Ce=Se||Oe||Function("return this")();function Ae(e,r,s,c){var a=-1,n=e?e.length:0;for(c&&n&&(s=e[++a]);++a<n;)s=r(s,e[a],a,e);return s}function Le(e){return e.match(oe)||[]}function ve(e){return function(r){return e==null?void 0:e[r]}}var ze=ve($e);function Te(e){return Ee.test(e)}function Ie(e){return e.match(Be)||[]}var Ne=Object.prototype,Re=Ne.toString,N=Ce.Symbol,R=N?N.prototype:void 0,U=R?R.toString:void 0;function Ue(e){if(typeof e=="string")return e;if(Fe(e))return U?U.call(e):"";var r=e+"";return r=="0"&&1/e==-re?"-0":r}function Ve(e){return function(r){return Ae(Ze(De(r).replace(we,"")),e,"")}}function Me(e){return!!e&&typeof e=="object"}function Fe(e){return typeof e=="symbol"||Me(e)&&Re.call(e)==se}function V(e){return e==null?"":Ue(e)}function De(e){return e=V(e),e&&e.replace(ne,ze).replace(je,"")}var Pe=Ve(function(e,r,s){return e+(s?"-":"")+r.toLowerCase()});function Ze(e,r,s){return e=V(e),r=s?void 0:r,r===void 0?Te(e)?Ie(e):Le(e):e.match(r)||[]}var Ge=Pe;const We=te(Ge),b={default:{_packs:{missile:5,"super-missile":5,"power-bomb":5}},varia:{},nature:{_packs:{missile:5,"super-missile":3,"power-bomb":2},"x-ray":"beam-burst"},vitality:{_packs:{missile:2,"super-missile":1,"power-bomb":1}},ascent:{"spring-ball":"boost-ball",draygon:"weapons-tank","x-ray":"shinespark"}},Ke=e=>We(e.toLowerCase().replace("'","")),M=[["energy-tank","reserve-tank","missile","super-missile","power-bomb"],["charge-beam","ice-beam","wave-beam","spazer-beam","plasma-beam"],["morph-ball","varia-suit","spring-ball","hi-jump-boots","space-jump"],["bomb","gravity-suit","ridley","speed-booster","screw-attack"],["grappling-beam","kraid","phantoon","draygon","x-ray"]],F=[["cwisp","morph-ball","bomb","spring-ball"],["hi-jump-boots","speed-booster","space-jump","screw-attack"],["varia-suit","ridley","gravity-suit"],["kraid","phantoon","draygon"]],Je=[["cwisp","morph-ball","bomb","spring-ball","varia-suit"],["hi-jump-boots","speed-booster","space-jump","screw-attack","gravity-suit"]],Ye=M[0],D=(e,r,s=2)=>!e||typeof e!="number"?null:(r?e*r:e).toString().padStart(s,0).split("").map(a=>`smi-number -number-${a}`),He=(e,r)=>["ridley","draygon","phantoon","kraid"].includes(e)?[`sm-g4-head -${e}`,r&&"-inactive"]:[`sm-item -${e}`,!r&&"-has-not"],P={"kill kraid":!0,"kill phantoon":!0,"kill draygon":!0,"kill ridley":!0,kraid:!0,phantoon:!0,draygon:!0,ridley:!0},qe=e=>e.map(r=>r.filter(s=>!P[s])),Qe={props:{inventory:Object,controlled:Boolean,mode:String,rows:Array,world:String,objectives:Object,width:Number,objective_order:Array},emits:["add-item","toggle-item","toggle-objective"],data(){return{targets:{},orders:[]}},computed:{vanilla_objectives(){const e=Object.keys(this.objectives||{});return[0,4].includes(e.length)&&!e.find(r=>!P[r])},row_slugs(){if(this.rows)return this.rows;let e=M.map(s=>s.slice());const r=b[this.world];return this.mode==="cwisp"?this.vanilla_objectives?e=F.map(s=>s.slice()):Object.keys(this.objectives||{}).length<=6?e=F:e=Je.map(s=>s.slice()):this.mode==="compact"&&(e[4].pop(),e[4].shift(),e.shift()),r&&(e=e.map(s=>s.map(c=>r[c]||c))),this.vanilla_objectives||(e=qe(e)),e},columns(){return Object.keys(this.objectives||{}).length>15?6:this.row_slugs[0].length},prepped_rows(){var s;const e=b[this.world]||b.default,r=this.row_slugs.map(c=>c.map(a=>{var o;const n=this.inventory[a];return{slug:a,numbers:D(n,(o=e._packs)==null?void 0:o[a]),attrs:{class:[He(a,n),n>99&&"-three-digits"],id:`grid-tracker__${a}`}}}));if(!this.vanilla_objectives){const c=Object.keys(this.objectives||{}),{columns:a}=this;this.mode||r[3].push(...r.pop());let n=r.findIndex(o=>o.length<r[0].length);for(n===-1&&(n=r.length);c.length>0;){for(;((s=r[n])==null?void 0:s.length)>=a;)n++;r[n]||r.push([]);const o=c.shift(),l=Ke(o),d=this.objective_order||this.orders;let u;d!=null&&d.includes(o)&&(u=d.indexOf(o)+1),r[n].push({slug:o,type:"objective",numbers:D(u,1,1),target:this.targets[o],attrs:{class:`smv-objective -${l} -${this.objectives[o]?"in":""}active`,id:`grid-tracker__${l}`}})}}return r},style(){const{width:e}=this;if(!e)return{};const r=this.columns+2*.2+(this.columns-1)*.1;return{fontSize:`${e/r}px`}}},watch:{objectives(){Object.keys(this.objectives).forEach(r=>{this.objectives[r]&&!this.orders.includes(r)&&this.orders.push(r)}),this.orders=this.orders.filter(r=>this.objectives[r])}},methods:{click(e,{slug:r,type:s}={}){if(s==="objective")this.objectives[r]===void 0?console.error("trying to toggle non-existant objective"):e.shiftKey||e.ctrlKey?this.targets[r]=!this.targets[r]:this.$emit("toggle-objective",r);else if(Ye.includes(r)){const c=e.shiftKey||e.ctrlKey?-1:1;!this.controlled&&this.$emit("add-item",r,c)}else!this.controlled&&this.$emit("toggle-item",r)}}},Xe=["onClick"],et={key:3,class:"fa fa-crosshairs _targeted"};function tt(e,r,s,c,a,n){const o=t.resolveComponent("sm-cwisp-tracker");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(`grid-tracker smi-tracker ${s.controlled?"-controlled":""}`),style:t.normalizeStyle(n.style)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(n.prepped_rows,(l,d)=>(t.openBlock(),t.createElementBlock("div",{key:d,class:"grid-tracker__row"},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(l,u=>(t.openBlock(),t.createElementBlock("div",{key:u.slug,class:"grid-tracker__cell"},[u.slug==="cwisp"?(t.openBlock(),t.createBlock(o,{key:0,inventory:s.inventory,onToggleItem:f=>!s.controlled&&e.$emit("toggle-item",f)},null,8,["inventory","onToggleItem"])):(t.openBlock(),t.createElementBlock("div",t.mergeProps({key:1},u.attrs,{onClick:f=>n.click(f,u)}),null,16,Xe)),u.numbers?(t.openBlock(),t.createElementBlock("div",{key:2,class:t.normalizeClass(`grid-tracker__numbers -length-${u.numbers.length}`)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(u.numbers,(f,bt)=>(t.openBlock(),t.createElementBlock("div",{key:bt,class:t.normalizeClass(f)},null,2))),128))],2)):u.target?(t.openBlock(),t.createElementBlock("i",et)):t.createCommentVNode("",!0)]))),128))]))),128))],6)}const Z=m(Qe,[["render",tt]]),i={item:e=>({class:e}),group:(e,r)=>[`pause-inventory__group -group-${e}`,r],number:e=>i.item(`smi-number -number-${e}`),numbers:(e,r)=>e.toString().padStart(r,0).split("").map(i.number)};i.separator=i.item("flex-grow");const G=e=>Array(e||0).fill().map((r,s)=>s),W=(e,r)=>({name:"energy-tanks",children:G(e).map(()=>i.item("smi -ietank")),class:i.group("energy-tanks",r)}),K=e=>({name:e,class:i.group(e),children:[i.item("smi -"+e)]}),rt={beams:["charge","ice","wave","spazer","plasma"].map(e=>e+"-beam"),suits:["varia-suit","gravity-suit"],misc:["morph-ball","bomb","spring-ball","screw-attack"],boots:["hi-jump-boots","space-jump","speed-booster"]},st=["missile","super-missile","power-bomb","grappling-beam","x-ray"],ot={props:{inventory:Object,controlled:Boolean,world:String,width:Number},emits:["add-item","toggle-item"],computed:{wrapper_class(){return["pause-inventory smi-pause-screen",this.controlled&&"-controlled",this.inventory["super-missile"]>99&&"-high-super-missile",this.inventory["power-bomb"]>99&&"-high-power-bomb"]},groups(){const e=[...this.energy_tanks,this.hud_items,this.reserve_tanks,this.energy_text,...this.pack_numbers,...this.item_groups,...this.pack_controls];return this.inventory["reserve-tank"]&&(e.push(K("auto")),e.push(K("reserve_text"))),e},hud_items(){return{name:"hud-items",class:i.group("hud-items"),children:st.map(e=>({class:["smi -i"+e,this.inventory[e]||"-inactive"],onclick:()=>this.$emit("toggle-item",e)}))}},pack_numbers(){const e=b[this.world]||b.default;return["missile","super-missile","power-bomb"].map(r=>{var c;const s=this.inventory[r]*(((c=e._packs)==null?void 0:c[r])||1);return{name:r,class:i.group(r),children:i.numbers(s||0,r==="missile"?3:2)}})},pack_controls(){return["missile","super-missile","power-bomb","energy-tank","reserve-tank"].map(r=>({name:`${r} controls`,class:i.group(r+"-controls"),children:[{class:"_plus",onclick:()=>this.$emit("add-item",r,1)},{class:"_minus",onclick:()=>this.$emit("add-item",r,-1)}]}))},energy_tanks(){const e=this.inventory["energy-tank"];return[W(Math.min(e,7)),W(Math.max(e-7,0),"-top")]},reserve_tanks(){const e=this.inventory["reserve-tank"],s=[...G(Math.floor(e)).map(()=>i.item("smi -ireserve")),i.separator];return e>0&&(100*e).toString().split("").forEach(a=>s.push(i.item(`smi-reserve-number -number-${a}`))),{name:"reserve-tanks",class:i.group("reserve-tanks"),children:s}},energy_text(){return{name:"energy-text",class:i.group("energy-text"),children:[i.item("smi -energy"),i.separator,i.number(9),i.number(9)]}},item_groups(){return Object.entries(rt).map(([e,r])=>({name:e,class:i.group(e),children:r.map(s=>({class:[`smi-pause-item -${s}`,this.inventory[s]||"-inactive"],onclick:()=>this.$emit("toggle-item",s)}))}))},style(){return this.width&&{"--inventory-px":`${this.width/256}px`}}}};function nt(e,r,s,c,a,n){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(n.wrapper_class),style:t.normalizeStyle(n.style)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(n.groups,o=>(t.openBlock(),t.createElementBlock("div",{key:o.name,class:t.normalizeClass(o.class)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(o.children,(l,d)=>(t.openBlock(),t.createElementBlock("div",t.mergeProps({key:d},l),null,16))),128))],2))),128))],6)}const J=m(ot,[["render",nt]]),it={props:{categories:Array,is_random:Boolean,short_names:Boolean},emits:["toggle-objective","toggle-category"]},ct={class:"objective-selector"},at={key:0},lt=["checked","onInput"],ut={key:1},dt=["title"],mt=["onInput","checked","disabled","name"];function pt(e,r,s,c,a,n){return t.openBlock(),t.createElementBlock("div",ct,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(s.categories,o=>(t.openBlock(),t.createElementBlock("div",{class:"objective-selector__category",key:o.id},[t.createElementVNode("h4",{class:t.normalizeClass(o.class)},[s.is_random?(t.openBlock(),t.createElementBlock("label",at,[t.createElementVNode("input",{type:"checkbox",checked:o.checked,onInput:l=>e.$emit("toggle-category",o)},null,40,lt),t.createTextVNode(" "+t.toDisplayString(o.id),1)])):(t.openBlock(),t.createElementBlock("div",ut,t.toDisplayString(o.id),1))],2),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(o.objectives,l=>(t.openBlock(),t.createElementBlock("div",{key:l.id,class:t.normalizeClass(["checkbox",l.disabled&&"-disabled"])},[t.createElementVNode("label",{title:l.disabled},[t.createElementVNode("input",{type:"checkbox",onInput:d=>e.$emit("toggle-objective",l.id),checked:l.selected,disabled:!!l.disabled,name:l.id},null,40,mt),t.createElementVNode("i",{class:t.normalizeClass(l.icon)},null,2),t.createTextVNode(" "+t.toDisplayString(s.short_names?l.short:l.id),1)],8,dt)],2))),128))]))),128))])}const Y=m(it,[["render",pt]]);return{CwispTracker:k,GridTracker:Z,PauseTracker:J,ObjectiveSelector:Y,install(e){e.component("SmCwispTracker",k),e.component("SmGridTracker",Z),e.component("SmPauseTracker",J),e.component("SmObjectiveSelector",Y)}}});
