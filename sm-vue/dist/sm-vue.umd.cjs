(function(t,m){typeof exports=="object"&&typeof module<"u"?module.exports=m(require("vue")):typeof define=="function"&&define.amd?define(["vue"],m):(t=typeof globalThis<"u"?globalThis:t||self,t["sm-vue"]=m(t.Vue))})(this,function(t){"use strict";const m=(e,s)=>{const r=e.__vccOpts||e;for(const[c,a]of s)r[c]=a;return r},H=["charge-beam","wave-beam","ice-beam","spazer-beam","plasma-beam"],q={props:{inventory:Object},emits:["toggle-item"],computed:{beams(){return H.map(e=>({id:e,class:[`sm-cwisp__cell -${e}`,this.inventory[e]?"-active":"-inactive"]}))}}},Q={class:"sm-cwisp"},X=["onClick"];function ee(e,s,r,c,a,n){return t.openBlock(),t.createElementBlock("div",Q,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(n.beams,o=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(o.class),onClick:l=>e.$emit("toggle-item",o.id),key:o.id},null,10,X))),128))])}const _=m(q,[["render",ee]]);var h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function te(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var se=1/0,re="[object Symbol]",oe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ne=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,x="\\ud800-\\udfff",ie="\\u0300-\\u036f\\ufe20-\\ufe23",ce="\\u20d0-\\u20f0",y="\\u2700-\\u27bf",w="a-z\\xdf-\\xf6\\xf8-\\xff",ae="\\xac\\xb1\\xd7\\xf7",le="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ue="\\u2000-\\u206f",de=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",j="A-Z\\xc0-\\xd6\\xd8-\\xde",me="\\ufe0e\\ufe0f",B=ae+le+ue+de,g="['’]",E="["+B+"]",$="["+ie+ce+"]",S="\\d+",pe="["+y+"]",O="["+w+"]",C="[^"+x+B+S+y+w+j+"]",be="\\ud83c[\\udffb-\\udfff]",fe="(?:"+$+"|"+be+")",he="[^"+x+"]",v="(?:\\ud83c[\\udde6-\\uddff]){2}",A="[\\ud800-\\udbff][\\udc00-\\udfff]",p="["+j+"]",ge="\\u200d",L="(?:"+O+"|"+C+")",ke="(?:"+p+"|"+C+")",z="(?:"+g+"(?:d|ll|m|re|s|t|ve))?",T="(?:"+g+"(?:D|LL|M|RE|S|T|VE))?",R=fe+"?",I="["+me+"]?",_e="(?:"+ge+"(?:"+[he,v,A].join("|")+")"+I+R+")*",xe=I+R+_e,ye="(?:"+[pe,v,A].join("|")+")"+xe,we=RegExp(g,"g"),je=RegExp($,"g"),Be=RegExp([p+"?"+O+"+"+z+"(?="+[E,p,"$"].join("|")+")",ke+"+"+T+"(?="+[E,p+L,"$"].join("|")+")",p+"?"+L+"+"+z,p+"+"+T,S,ye].join("|"),"g"),Ee=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$e={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},Se=typeof h=="object"&&h&&h.Object===Object&&h,Oe=typeof self=="object"&&self&&self.Object===Object&&self,Ce=Se||Oe||Function("return this")();function ve(e,s,r,c){var a=-1,n=e?e.length:0;for(c&&n&&(r=e[++a]);++a<n;)r=s(r,e[a],a,e);return r}function Ae(e){return e.match(oe)||[]}function Le(e){return function(s){return e==null?void 0:e[s]}}var ze=Le($e);function Te(e){return Ee.test(e)}function Re(e){return e.match(Be)||[]}var Ie=Object.prototype,Ne=Ie.toString,N=Ce.Symbol,U=N?N.prototype:void 0,V=U?U.toString:void 0;function Ue(e){if(typeof e=="string")return e;if(Fe(e))return V?V.call(e):"";var s=e+"";return s=="0"&&1/e==-se?"-0":s}function Ve(e){return function(s){return ve(Ze(De(s).replace(we,"")),e,"")}}function Me(e){return!!e&&typeof e=="object"}function Fe(e){return typeof e=="symbol"||Me(e)&&Ne.call(e)==re}function M(e){return e==null?"":Ue(e)}function De(e){return e=M(e),e&&e.replace(ne,ze).replace(je,"")}var Pe=Ve(function(e,s,r){return e+(r?"-":"")+s.toLowerCase()});function Ze(e,s,r){return e=M(e),s=r?void 0:s,s===void 0?Te(e)?Re(e):Ae(e):e.match(s)||[]}var Ge=Pe;const We=te(Ge),b={default:{_packs:{missile:5,"super-missile":5,"power-bomb":5}},varia:{},nature:{_packs:{missile:5,"super-missile":3,"power-bomb":2},"x-ray":"beam-burst"},vitality:{_packs:{missile:2,"super-missile":1,"power-bomb":1}},ascent:{"spring-ball":"boost-ball",draygon:"weapons-tank","x-ray":"shinespark"}},Ke=e=>We(e.toLowerCase().replace("'","")),F=[["energy-tank","reserve-tank","missile","super-missile","power-bomb"],["charge-beam","ice-beam","wave-beam","spazer-beam","plasma-beam"],["morph-ball","varia-suit","spring-ball","hi-jump-boots","space-jump"],["bomb","gravity-suit","ridley","speed-booster","screw-attack"],["grappling-beam","kraid","phantoon","draygon","x-ray"]],D=[["cwisp","morph-ball","bomb","spring-ball"],["hi-jump-boots","speed-booster","space-jump","screw-attack"],["varia-suit","ridley","gravity-suit"],["kraid","phantoon","draygon"]],Je=[["cwisp","morph-ball","bomb","spring-ball","varia-suit"],["hi-jump-boots","speed-booster","space-jump","screw-attack","gravity-suit"]],Ye=F[0],P=(e,s,r=2)=>!e||typeof e!="number"?null:(s?e*s:e).toString().padStart(r,0).split("").map(a=>`smi-number -number-${a}`),He=["spore-spawn","crocomire","botwoon","golden-torizo"],qe=(e,s)=>k[e]||He.includes(e)?[`sm-g4-head -${e}`,s&&"-inactive"]:[`sm-item -${e}`,!s&&"-has-not"],k={"kill kraid":!0,"kill phantoon":!0,"kill draygon":!0,"kill ridley":!0,kraid:!0,phantoon:!0,draygon:!0,ridley:!0},Qe=e=>e.map(s=>s.filter(r=>!k[r])),Xe={props:{inventory:Object,controlled:Boolean,mode:String,rows:Array,world:String,objectives:Object,width:Number,objective_order:Array},emits:["add-item","toggle-item","toggle-objective"],data(){return{targets:{},orders:[]}},computed:{vanilla_objectives(){const e=Object.keys(this.objectives||{});return[0,4].includes(e.length)&&!e.find(s=>!k[s])},row_slugs(){if(this.rows)return this.rows;let e=F.map(r=>r.slice());const s=b[this.world];return this.mode==="cwisp"?this.vanilla_objectives?e=D.map(r=>r.slice()):Object.keys(this.objectives||{}).length<=6?e=D:e=Je.map(r=>r.slice()):this.mode==="compact"&&(e[4].pop(),e[4].shift(),e.shift()),s&&(e=e.map(r=>r.map(c=>s[c]||c))),this.vanilla_objectives||(e=Qe(e)),e},columns(){return Object.keys(this.objectives||{}).length>15?6:this.row_slugs[0].length},prepped_rows(){var r;const e=b[this.world]||b.default,s=this.row_slugs.map(c=>c.map(a=>{var o;const n=this.inventory[a];return{slug:a,numbers:P(n,(o=e._packs)==null?void 0:o[a]),attrs:{class:[qe(a,n),n>99&&"-three-digits"],id:`grid-tracker__${a}`}}}));if(!this.vanilla_objectives){const c=Object.keys(this.objectives||{}),{columns:a}=this;this.mode||s[3].push(...s.pop());let n=s.findIndex(o=>o.length<s[0].length);for(n===-1&&(n=s.length);c.length>0;){for(;((r=s[n])==null?void 0:r.length)>=a;)n++;s[n]||s.push([]);const o=c.shift(),l=Ke(o),d=this.objective_order||this.orders;let u;d!=null&&d.includes(o)&&(u=d.indexOf(o)+1),s[n].push({slug:o,type:"objective",numbers:P(u,1,1),target:this.targets[o],attrs:{class:`smv-objective -${l} -${this.objectives[o]?"in":""}active`,id:`grid-tracker__${l}`}})}}return s},style(){const{width:e}=this;if(!e)return{};const s=this.columns+2*.2+(this.columns-1)*.1;return{fontSize:`${e/s}px`}}},watch:{objectives(){Object.keys(this.objectives).forEach(s=>{this.objectives[s]&&!this.orders.includes(s)&&this.orders.push(s)}),this.orders=this.orders.filter(s=>this.objectives[s])}},methods:{click(e,{slug:s,type:r}={}){if(r==="objective")this.objectives[s]===void 0?console.error("trying to toggle non-existant objective"):e.shiftKey||e.ctrlKey?this.targets[s]=!this.targets[s]:this.$emit("toggle-objective",s);else if(Ye.includes(s)){const c=e.shiftKey||e.ctrlKey?-1:1;!this.controlled&&this.$emit("add-item",s,c)}else!this.controlled&&this.$emit("toggle-item",s)}}},et=["onClick"],tt={key:3,class:"fa fa-crosshairs _targeted"};function st(e,s,r,c,a,n){const o=t.resolveComponent("sm-cwisp-tracker");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(`grid-tracker smi-tracker ${r.controlled?"-controlled":""}`),style:t.normalizeStyle(n.style)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(n.prepped_rows,(l,d)=>(t.openBlock(),t.createElementBlock("div",{key:d,class:"grid-tracker__row"},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(l,u=>(t.openBlock(),t.createElementBlock("div",{key:u.slug,class:"grid-tracker__cell"},[u.slug==="cwisp"?(t.openBlock(),t.createBlock(o,{key:0,inventory:r.inventory,onToggleItem:f=>!r.controlled&&e.$emit("toggle-item",f)},null,8,["inventory","onToggleItem"])):(t.openBlock(),t.createElementBlock("div",t.mergeProps({key:1},u.attrs,{onClick:f=>n.click(f,u)}),null,16,et)),u.numbers?(t.openBlock(),t.createElementBlock("div",{key:2,class:t.normalizeClass(`grid-tracker__numbers -length-${u.numbers.length}`)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(u.numbers,(f,gt)=>(t.openBlock(),t.createElementBlock("div",{key:gt,class:t.normalizeClass(f)},null,2))),128))],2)):u.target?(t.openBlock(),t.createElementBlock("i",tt)):t.createCommentVNode("",!0)]))),128))]))),128))],6)}const Z=m(Xe,[["render",st]]),i={item:e=>({class:e}),group:(e,s)=>[`pause-inventory__group -group-${e}`,s],number:e=>i.item(`smi-number -number-${e}`),numbers:(e,s)=>e.toString().padStart(s,0).split("").map(i.number)};i.separator=i.item("flex-grow");const G=e=>Array(e||0).fill().map((s,r)=>r),W=(e,s)=>({name:"energy-tanks",children:G(e).map(()=>i.item("smi -ietank")),class:i.group("energy-tanks",s)}),K=e=>({name:e,class:i.group(e),children:[i.item("smi -"+e)]}),rt={beams:["charge","ice","wave","spazer","plasma"].map(e=>e+"-beam"),suits:["varia-suit","gravity-suit"],misc:["morph-ball","bomb","spring-ball","screw-attack"],boots:["hi-jump-boots","space-jump","speed-booster"]},ot=["missile","super-missile","power-bomb","grappling-beam","x-ray"],nt={props:{inventory:Object,controlled:Boolean,world:String,width:Number},emits:["add-item","toggle-item"],computed:{wrapper_class(){return["pause-inventory smi-pause-screen",this.controlled&&"-controlled",this.inventory["super-missile"]>99&&"-high-super-missile",this.inventory["power-bomb"]>99&&"-high-power-bomb"]},groups(){const e=[...this.energy_tanks,this.hud_items,this.reserve_tanks,this.energy_text,...this.pack_numbers,...this.item_groups,...this.pack_controls];return this.inventory["reserve-tank"]&&(e.push(K("auto")),e.push(K("reserve_text"))),e},hud_items(){return{name:"hud-items",class:i.group("hud-items"),children:ot.map(e=>({class:["smi -i"+e,this.inventory[e]||"-inactive"],onclick:()=>this.$emit("toggle-item",e)}))}},pack_numbers(){const e=b[this.world]||b.default;return["missile","super-missile","power-bomb"].map(s=>{var c;const r=this.inventory[s]*(((c=e._packs)==null?void 0:c[s])||1);return{name:s,class:i.group(s),children:i.numbers(r||0,s==="missile"?3:2)}})},pack_controls(){return["missile","super-missile","power-bomb","energy-tank","reserve-tank"].map(s=>({name:`${s} controls`,class:i.group(s+"-controls"),children:[{class:"_plus",onclick:()=>this.$emit("add-item",s,1)},{class:"_minus",onclick:()=>this.$emit("add-item",s,-1)}]}))},energy_tanks(){const e=this.inventory["energy-tank"];return[W(Math.min(e,7)),W(Math.max(e-7,0),"-top")]},reserve_tanks(){const e=this.inventory["reserve-tank"],r=[...G(Math.floor(e)).map(()=>i.item("smi -ireserve")),i.separator];return e>0&&(100*e).toString().split("").forEach(a=>r.push(i.item(`smi-reserve-number -number-${a}`))),{name:"reserve-tanks",class:i.group("reserve-tanks"),children:r}},energy_text(){return{name:"energy-text",class:i.group("energy-text"),children:[i.item("smi -energy"),i.separator,i.number(9),i.number(9)]}},item_groups(){return Object.entries(rt).map(([e,s])=>({name:e,class:i.group(e),children:s.map(r=>({class:[`smi-pause-item -${r}`,this.inventory[r]||"-inactive"],onclick:()=>this.$emit("toggle-item",r)}))}))},style(){return this.width&&{"--inventory-px":`${this.width/256}px`}}}};function it(e,s,r,c,a,n){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(n.wrapper_class),style:t.normalizeStyle(n.style)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(n.groups,o=>(t.openBlock(),t.createElementBlock("div",{key:o.name,class:t.normalizeClass(o.class)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(o.children,(l,d)=>(t.openBlock(),t.createElementBlock("div",t.mergeProps({key:d},l),null,16))),128))],2))),128))],6)}const J=m(nt,[["render",it]]),ct={bosses:"danger",minibosses:"warning",items:"primary",map:"success",memes:"info",enemies:"default"},at={props:{categories:Array,is_random:Boolean,short_names:Boolean},emits:["toggle-objective","toggle-category"],methods:{getClass(e){return[`btn btn-${e.selected?ct[e.category]:"empty"} -objective`,e.disabled&&"-disabled"]}}},lt={class:"objective-selector"},ut={key:0},dt=["checked","onInput"],mt={key:1},pt={class:"objective-selector__button-list"},bt=["title","onClick"],ft={class:"objective-selector__name"};function ht(e,s,r,c,a,n){return t.openBlock(),t.createElementBlock("div",lt,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(r.categories,o=>(t.openBlock(),t.createElementBlock("div",{class:"objective-selector__category",key:o.id},[t.createElementVNode("h4",{class:t.normalizeClass(o.class)},[r.is_random?(t.openBlock(),t.createElementBlock("label",ut,[t.createElementVNode("input",{type:"checkbox",checked:o.checked,onInput:l=>e.$emit("toggle-category",o)},null,40,dt),t.createTextVNode(" "+t.toDisplayString(o.id),1)])):(t.openBlock(),t.createElementBlock("div",mt,t.toDisplayString(o.id),1))],2),t.createElementVNode("div",pt,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(o.objectives,l=>(t.openBlock(),t.createElementBlock("button",{key:l.id,class:t.normalizeClass(n.getClass(l)),title:l.disabled,onClick:d=>!l.disabled&&e.$emit("toggle-objective",l.id)},[t.createElementVNode("i",{class:t.normalizeClass(l.icon)},null,2),t.createElementVNode("span",ft,t.toDisplayString(r.short_names?l.short:l.id),1)],10,bt))),128))])]))),128))])}const Y=m(at,[["render",ht]]);return{CwispTracker:_,GridTracker:Z,PauseTracker:J,ObjectiveSelector:Y,install(e){e.component("SmCwispTracker",_),e.component("SmGridTracker",Z),e.component("SmPauseTracker",J),e.component("SmObjectiveSelector",Y)}}});
