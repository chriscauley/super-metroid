(function(t,i){typeof exports=="object"&&typeof module<"u"?module.exports=i(require("vue")):typeof define=="function"&&define.amd?define(["vue"],i):(t=typeof globalThis<"u"?globalThis:t||self,t["sm-vue"]=i(t.Vue))})(this,function(t){"use strict";const i={default:{_packs:{missile:5,"super-missile":5,"power-bomb":5}},nature:{_packs:{missile:5,"super-missile":3,"power-bomb":2},"x-ray":"beam-burst"}},p=(e,r)=>{const s=e.__vccOpts||e;for(const[o,a]of r)s[o]=a;return s},k=[["energy-tank","reserve-tank","missile","super-missile","power-bomb"],["charge-beam","ice-beam","wave-beam","spazer-beam","plasma-beam"],["morph-ball","varia-suit","spring-ball","hi-jump-boots","space-jump"],["bomb","gravity-suit","ridley","speed-booster","screw-attack"],["grappling-beam","kraid","phantoon","draygon","x-ray"]],f=k[0],w=(e,r)=>!e||typeof e!="number"?null:(r?e*r:e).toString().padStart(2,0).split("").map(o=>`smi-number -number-${o}`),B=(e,r)=>["ridley","draygon","phantoon","kraid"].includes(e)?[`sm-g4-head -${e}`,r&&"-inactive"]:[`sm-item -${e}`,!r&&"-has-not"],$={props:{inventory:Object,controlled:Boolean,compact:Boolean,rows:Array,world:String},emits:["add-item","toggle-item"],computed:{row_slugs(){if(this.rows)return this.rows;let e=k.slice().map(s=>s.slice());const r=i[this.world];return r&&(e=e.map(s=>s.map(o=>r[o]||o))),this.compact&&(e[4].pop(),e[4].shift(),e.shift()),e},prepped_rows(){const e=i[this.world]||i.default;return this.row_slugs.map(r=>r.map(s=>{var a;const o=this.inventory[s];return{slug:s,numbers:w(o,(a=e._packs)==null?void 0:a[s]),attrs:{class:[B(s,o),o>99&&"-three-digits"],id:`grid-tracker__${s}`}}}))}},methods:{click(e,{slug:r}){if(f.includes(r)){const s=e.shiftKey||e.ctrlKey?-1:1;this.$emit("add-item",r,s)}else this.$emit("toggle-item",r)}}},x={class:"grid-tracker smi-tracker"},E=["onClick"],S={key:0,class:"grid-tracker__numbers"};function j(e,r,s,o,a,c){return t.openBlock(),t.createElementBlock("div",x,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(c.prepped_rows,(m,d)=>(t.openBlock(),t.createElementBlock("div",{key:d,class:"grid-tracker__row"},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m,l=>(t.openBlock(),t.createElementBlock("div",t.mergeProps({key:l.id},l.attrs,{onClick:u=>c.click(u,l)}),[l.numbers?(t.openBlock(),t.createElementBlock("div",S,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(l.numbers,(u,N)=>(t.openBlock(),t.createElementBlock("div",{key:N,class:t.normalizeClass(u)},null,2))),128))])):t.createCommentVNode("",!0)],16,E))),128))]))),128))])}const h=p($,[["render",j]]),n={item:e=>({class:e}),group:(e,r)=>[`pause-inventory__group -group-${e}`,r],number:e=>n.item(`smi-number -number-${e}`),numbers:(e,r)=>e.toString().padStart(r,0).split("").map(n.number)};n.separator=n.item("flex-grow");const g=e=>Array(e||0).fill().map((r,s)=>s),_=(e,r)=>({name:"energy-tanks",children:g(e).map(()=>n.item("smi -ietank")),class:n.group("energy-tanks",r)}),b=e=>({name:e,class:n.group(e),children:[n.item("smi -"+e)]}),z={beams:["charge","ice","wave","spazer","plasma"].map(e=>e+"-beam"),suits:["varia-suit","gravity-suit"],misc:["morph-ball","bomb","spring-ball","screw-attack"],boots:["hi-jump-boots","space-jump","speed-booster"]},C=["missile","super-missile","power-bomb","grappling-beam","x-ray"],T={props:{inventory:Object,controlled:Boolean,world:String},emits:["add-item","toggle-item"],computed:{wrapper_class(){return["pause-inventory smi-pause-screen",this.controlled&&"-controlled",this.inventory["super-missile"]>99&&"-high-super-missile",this.inventory["power-bomb"]>99&&"-high-power-bomb"]},groups(){const e=[...this.energy_tanks,this.hud_items,this.reserve_tanks,this.energy_text,...this.pack_numbers,...this.item_groups,...this.pack_controls];return this.inventory["reserve-tank"]&&(e.push(b("auto")),e.push(b("reserve_text"))),e},hud_items(){return{name:"hud-items",class:n.group("hud-items"),children:C.map(e=>({class:["smi -i"+e,this.inventory[e]||"-inactive"],onclick:()=>this.$emit("toggle-item",e)}))}},pack_numbers(){const e=i[this.world]||i.default;return["missile","super-missile","power-bomb"].map(r=>{var o;const s=this.inventory[r]*(((o=e._packs)==null?void 0:o[r])||1);return{name:r,class:n.group(r),children:n.numbers(s||0,r==="missile"?3:2)}})},pack_controls(){return["missile","super-missile","power-bomb","energy-tank","reserve-tank"].map(r=>({name:`${r} controls`,class:n.group(r+"-controls"),children:[{class:"_plus",onclick:()=>this.$emit("add-item",r,1)},{class:"_minus",onclick:()=>this.$emit("add-item",r,-1)}]}))},energy_tanks(){const e=this.inventory["energy-tank"];return[_(Math.min(e,7)),_(Math.max(e-7,0),"-top")]},reserve_tanks(){const e=this.inventory["reserve-tank"],s=[...g(Math.floor(e)).map(()=>n.item("smi -ireserve")),n.separator];return e>0&&(100*e).toString().split("").forEach(a=>s.push(n.item(`smi-reserve-number -number-${a}`))),{name:"reserve-tanks",class:n.group("reserve-tanks"),children:s}},energy_text(){return{name:"energy-text",class:n.group("energy-text"),children:[n.item("smi -energy"),n.separator,n.number(9),n.number(9)]}},item_groups(){return Object.entries(z).map(([e,r])=>({name:e,class:n.group(e),children:r.map(s=>({class:[`smi-pause-item -${s}`,this.inventory[s]||"-inactive"],onclick:()=>this.$emit("toggle-item",s)}))}))}}};function v(e,r,s,o,a,c){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(c.wrapper_class)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(c.groups,m=>(t.openBlock(),t.createElementBlock("div",{key:m.name,class:t.normalizeClass(m.class)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(m.children,(d,l)=>(t.openBlock(),t.createElementBlock("div",t.mergeProps({key:l},d),null,16))),128))],2))),128))],2)}const I={grid:h,compact:h,pause:p(T,[["render",v]])},F={name:"ItemTracker",props:{inventory:Object,controlled:Boolean,compact:Boolean,format:String,width:Number},computed:{tagName(){return I[this.format]},style(){const{width:e}=this;if(!e)return{};const r=5+2*.2+4*.1;return{"--inventory-px":`${e/256}px`,fontSize:`${e/r}px`}}}};function L(e,r,s,o,a,c){return t.openBlock(),t.createBlock(t.resolveDynamicComponent(c.tagName),{inventory:s.inventory,controlled:s.controlled,compact:s.compact||s.format==="compact",style:t.normalizeStyle(c.style)},null,8,["inventory","controlled","compact","style"])}const y=p(F,[["render",L]]);return{ItemTracker:y,install(e){e.component("SmItemTracker",y)}}});
